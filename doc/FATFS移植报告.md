# FATFS 移植报告
* Author: Waitti

## 移植原因
起初fat32文件系统由我手工编写，但是一方面由于刚刚接触fat32文件系统，另一方面由于早期无法观测到评测平台的输出结果无法定位错误一直没有成绩，便起了移植开源fat32驱动的念头。

## 移植过程

* 在官网 http://elm-chan.org/fsw/ff/00index_e.html 下载最新源代码(R.0.14b)
* 在diskio.c文件中配置接口
* 配置ff.conf

在将fatfs成功移植到SysCore并在本地运行成功时，我惊讶的发现：提交后还是没有成绩！

好在这时候已经可以观测到评测机的输出结果，于是经过了漫长的DEBUG后我发现：

* 评测机无法正确初始化static数组为NULL
* 评测机检测SECTOR_COUNT = 0
* 评测机认为文件系统是fat16

于是我手动将这些变量置为了正确的值，在评测机上终于有了成绩。

## 结束语

虽然我不知道为什么评测机和本地效果不一致，但是通过阅读和修改fatfs源代码也算是完成了移植。
不一致的问题有待探索。